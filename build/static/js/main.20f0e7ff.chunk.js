(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{128:function(e,t,a){e.exports=a(162)},153:function(e,t,a){},154:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(88),i=a(39),s=a.n(i),u=a(48),m=a(113),d=a(35),p=function(e,t){return Object(d.a)({},e,{},t)},g=function(e){e?s.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete s.a.defaults.headers.common.Authorization},y=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},f={isAuth:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":return p(e,t.data);case"SET_CURRENT_USER":return p(e,{isAuth:!y(t.payload),isAdmin:t.payload.isAdmin||!1,user:t.payload});default:return e}},h={cart:[]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CART":var a=e.cart.map((function(e){return e.id}));return a.indexOf(t.payload.id)<0?e.cart.push(t.payload):(e={cart:e.cart.filter((function(e){return e.id!==t.payload.id}))}).cart.push(t.payload),e;case"CLEAR_CART":return e={cart:[]};case"REMOVE_FROM_CART":return e={cart:e.cart.filter((function(e){return e.id!==t.payload.id}))};default:return e}},x=Object(u.c)({auth:E,cart:b}),v="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,C=Object(u.e)(x,v(Object(u.a)(m.a))),j=(a(153),a(154),a(80)),O=a(12),w=a(73),k=a.n(w),N=a(96),q=a(54),R=a(100),S=a(190),T=a(194),A=a(211),I=a(212),F=a(201),_=a(210),B=a(205),z=a(206),U=a(207),P=a(208),$=a(209),D=a(185),M=a(202),G=a(203),W=a(204),Y=a(114),L=a.n(Y),V=function(e){return{type:"SET_CURRENT_USER",payload:e}},H={logoutUser:function(e){return function(e){localStorage.removeItem("token"),g(!1),e(V({}))}},login:function(e,t){return function(a){var n={email:e,password:t};s.a.post("/login",n).then((function(e){var t=e.data.token;localStorage.setItem("token",t),g(t);try{var n=L()(t);a(V(n))}catch(r){a(V({}))}}))}},setCurrentUser:V,updateCart:function(e){return{type:"UPDATE_CART",payload:e}},clearCart:function(){return{type:"CLEAR_CART"}},removeFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:e}}},J=a(187),X=a(189),K=a(191),Q=a(192),Z=a(193),ee=Object(D.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),te=function(e){var t=ee();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{position:"relative"},r.a.createElement(X.a,{className:"justify-content-end",style:{backgroundColor:"#ff8700"}},r.a.createElement("span",{onClick:e.openCart,className:"nav-link",style:{cursor:"pointer"}},r.a.createElement(S.a,{variant:"caption",color:"inherit",noWrap:!0,className:"align-items-center",style:{fontSize:14}},r.a.createElement(K.a,{badgeContent:e.cart.length,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement(Q.a,{className:t.icon})),r.a.createElement("span",null,"Cart"))),e.isAuth&&r.a.createElement(j.b,{to:"/orders",className:"nav-link",activeStyle:{fontWeight:"bold",color:"#ff8888"}},r.a.createElement(S.a,{variant:"caption",color:"inherit",noWrap:!0,className:"align-items-center",style:{fontSize:14}},r.a.createElement(Z.a,{className:t.icon}),r.a.createElement("span",null,"Orders"))))))},ae=a(195),ne=a(196),re=a(197),ce=a(198),le=a(199),oe=a(200),ie=a(121),se=a(74);function ue(){return r.a.createElement(S.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var me=Object(D.a)((function(e){return{icon:{marginRight:e.spacing(1)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},paper:{position:"absolute",width:"80%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,8,3),justifyContent:"center",alignItems:"stretch",flexDirection:"column",overflow:"auto",maxHeight:"500px"},list:{width:250},fullList:{width:"auto"},cartCard:{display:"flex"},modalItem:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,border:"1px solid black",padding:"8px 15px",borderRadius:"5px"}}})),de=Object(o.b)((function(e){return Object(d.a)({},e.cart,{},e.auth)}),(function(e){return{updateCart:function(t){return e(H.updateCart(t))},clearCart:function(){return e(H.clearCart())},removeCartItem:function(t){return e(H.removeFromCart(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(q.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(q.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(!1),g=Object(q.a)(p,2),y=g[0],f=g[1],E=Object(n.useState)(null),h=Object(q.a)(E,2),b=h[0],x=h[1],v=Object(n.useState)(null),C=Object(q.a)(v,2),j=C[0],O=C[1],w=me(),D=Object(R.b)({queryKey:"products",queryFn:function(){var e=Object(N.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){s.a.get("/v1/shop/products").then((function(t){e(t.data)})).catch((function(e){t(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),config:{onSuccess:function(e){m(!1)},onError:function(e){m(!1)}}}),Y=D.data,L=D.status,V=e.cart.map((function(e){return{id:e.id,quantity:e.quantity}})),H=Object(R.a)((function(e){return function(e){return new Promise((function(t,a){s.a.post("/v1/shop/orders",e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}(Object(d.a)({},e,{products:V}))}),{onSuccess:function(){l(!1),O(!1)},onError:function(){m(!1)}}),J=Object(q.a)(H,2),X=J[0],K=J[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,Object.assign({},e,{openCart:function(){return l(!0)}})),r.a.createElement(T.a,null),r.a.createElement("main",null,r.a.createElement(A.a,{open:!!y,onClose:function(){return f(null)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",flexGrow:1,justifyContent:"center",alignItems:"center"}},"success"===K.status?r.a.createElement("div",{style:{backgroundColor:"white",textAlign:"center",padding:"48px"}},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Taking the order was successful!"),r.a.createElement(S.a,null,"Your order:"),r.a.createElement("p",{style:{margin:"0"}},"Name: ",b&&b.name),r.a.createElement("p",{style:{margin:"0"}},"Address: ",b&&b.address),r.a.createElement("p",{style:{margin:"0"}},"Phone number: ",b&&b.phoneNumber),r.a.createElement("div",{style:{maxHeight:"400px",overflow:"auto",marginBottom:"16px"}},r.a.createElement("p",{style:{marginBottom:"0",marginTop:"16px"}},"Products:"),e.cart.map((function(e,t){return r.a.createElement("div",{className:w.modalItem},r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0"}},e.title),r.a.createElement("p",{style:{margin:"0"}},e.quantity," x $",e.price," ","= $",(e.quantity*e.price).toFixed(2))))}))),r.a.createElement("div",null,e.cart.length>1?"Total: ".concat(e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity})).toFixed(2)," + $10 (shipping) = ").concat((e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity}))+10).toFixed(2)):"Total: ".concat((e.cart[0].price*e.cart[0].quantity).toFixed(2)," + $10 (shipping) = ").concat((e.cart[0].price*e.cart[0].quantity+10).toFixed(2))),r.a.createElement(I.a,{color:"secondary",onClick:function(){f(null),e.clearCart()}},"Close")):"loading"!==K.status?r.a.createElement(ie.a,{initialValues:{name:"",address:"",phoneNumber:""},onSubmit:function(){var t=Object(N.a)(k.a.mark((function t(a,n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(Object(d.a)({},a,{products:e.cart})),X(a);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:se.a().shape({name:se.b().required(),address:se.b().required(),phoneNumber:se.b().required()})},(function(e){var t=e.values,a=e.touched,n=e.errors,c=e.handleChange,l=e.handleBlur,o=e.handleSubmit,i=n.response;return r.a.createElement(ae.a,{onSubmit:o,style:{padding:"24px",backgroundColor:"white"}},r.a.createElement(ne.a,null,r.a.createElement(re.a,{for:"name"},"Name"),r.a.createElement(ce.a,{name:"name",type:"text",value:t.name,onChange:c,onBlur:l}),n.name&&a.name&&r.a.createElement("div",{style:{color:"orangered"}},n.name)),r.a.createElement(ne.a,null,r.a.createElement(re.a,{for:"address"},"Address"),r.a.createElement(ce.a,{name:"address",type:"text",value:t.address,onChange:c,onBlur:l}),n.address&&a.address&&r.a.createElement("div",{style:{color:"orangered"}},n.address)),r.a.createElement(ne.a,null,r.a.createElement(re.a,{for:"phoneNumber"},"Phone number"),r.a.createElement(ce.a,{name:"phoneNumber",type:"text",value:t.phoneNumber,onChange:c,onBlur:l}),n.phoneNumber&&a.phoneNumber&&r.a.createElement("div",{style:{color:"orangered"}},n.phoneNumber)),i&&r.a.createElement("div",{style:{color:"orangered"}},i),r.a.createElement(le.a,null,r.a.createElement(I.a,{color:"primary",onClick:o,disabled:u},"Order!")," ",r.a.createElement(I.a,{color:"secondary",onClick:function(){return f(!1)},disabled:u},"Cancel")))})):"loading"===K.status?r.a.createElement("div",{style:{backgroundColor:"white",height:"200px",width:"200px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(oe.a,{color:"danger"})):null),r.a.createElement(A.a,{open:c,onClose:function(){return l(!c)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",flexGrow:1,justifyContent:"center",alignItems:"center"}},r.a.createElement(F.a,{container:!0,className:w.paper},e.cart.length>0?e.cart.map((function(t,a){return r.a.createElement("div",{className:w.modalItem},r.a.createElement("div",null,r.a.createElement("img",{src:t.imageUrl,alt:"image",style:{height:"100px",float:"right",marginRight:"24px"}})),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{display:"inline-block",margin:"0",marginRight:"16px"}},t.title),r.a.createElement("span",{onClick:function(){return e.removeCartItem(t)},style:{cursor:"pointer"}},r.a.createElement(M.a,{htmlColor:"#f50057"}))),r.a.createElement("p",null,t.quantity," x $",t.price," = $",(t.quantity*t.price).toFixed(2)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100px"}},r.a.createElement("span",{component:"span",style:{cursor:"pointer",textAlign:"center",marginRight:"12px"},onClick:function(){var a=t.quantity+1;e.updateCart(Object(d.a)({},t,{quantity:a}))}},r.a.createElement(G.a,{color:"primary"})),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:"12px"}},t.quantity),r.a.createElement("span",{style:{cursor:"pointer",textAlign:"center"},onClick:function(){var a=t.quantity-1;a>=1&&e.updateCart(Object(d.a)({},t,{quantity:a}))}},r.a.createElement(W.a,{color:"primary"})))))})):r.a.createElement("div",{className:w.modalItem},"No items in cart"),e.cart.length>0?r.a.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",null,"Shipping: $10"),r.a.createElement("div",{className:w.modalItem,style:{width:"350px"}},e.cart.length>1?"Total: ".concat(e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity})).toFixed(2)," + $10 (shipping) = ").concat((e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity}))+10).toFixed(2)):"Total: ".concat((e.cart[0].price*e.cart[0].quantity).toFixed(2)," + $10 (shipping) = ").concat((e.cart[0].price*e.cart[0].quantity+10).toFixed(2)))):null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"}},e.cart.length>0?r.a.createElement(I.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return f(!0)},style:{marginRight:"16px"}},"Take an order"):null,r.a.createElement(I.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return l(!1)}},"Close")))),r.a.createElement(_.a,{anchor:"bottom",open:!!j,onClose:function(){return O(null)},onOpen:function(){return O(j)}},r.a.createElement("div",{component:"children",style:{display:"flex",justifyContent:"center",padding:"12px"}},r.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(B.a,{className:w.card},r.a.createElement(z.a,{className:w.cardMedia,image:j?j.imageUrl:"/",title:"Pizza"}),r.a.createElement(U.a,{className:w.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},j&&j.title),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(S.a,null,j&&j.price),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",{component:"span",style:{cursor:"pointer",textAlign:"center",marginRight:"12px"},onClick:function(){var e=j.quantity+1;O(Object(d.a)({},j,{quantity:e}))}},r.a.createElement(G.a,{color:"primary"})),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:"12px"}},j&&j.quantity),r.a.createElement("span",{style:{cursor:"pointer",textAlign:"center"},onClick:function(){var e=j.quantity-1;e>=1&&O(Object(d.a)({},j,{quantity:e}))}},r.a.createElement(W.a,{color:"primary"})))),r.a.createElement(S.a,{style:{textAlign:"center",marginTop:"24px"}},"Total:"," ",j&&(j.quantity*j.price).toFixed(2)))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingBottom:"24px"}},r.a.createElement(I.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.updateCart(j),O(null)},style:{marginRight:"16px"}},"Add to cart"),r.a.createElement(I.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return O(null)}},"Close"))),r.a.createElement("div",{className:w.heroContent},r.a.createElement(P.a,{maxWidth:"sm"},r.a.createElement(S.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"The Yummi Pizza"),r.a.createElement(S.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"Your best decision!"))),r.a.createElement(P.a,{className:w.cardGrid,maxWidth:"md"},r.a.createElement(F.a,{container:!0,spacing:4},"success"===L?Y.map((function(t){return r.a.createElement(F.a,{item:!0,key:t.id,xs:12,sm:6,md:4},r.a.createElement(B.a,{className:w.card},r.a.createElement(z.a,{className:w.cardMedia,image:t.imageUrl,title:"Image title"}),r.a.createElement(U.a,{className:w.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.title),r.a.createElement(S.a,null,t.description),r.a.createElement(S.a,{color:"primary"},"$",t.price)),r.a.createElement($.a,null,r.a.createElement(I.a,{size:"small",color:"primary",onClick:function(){return O(Object(d.a)({},t,{quantity:1}))}},"View"),e.isAuth&&r.a.createElement(I.a,{size:"small",color:"primary"},"Edit"))))})):"loading"===L?r.a.createElement("div",{style:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"}},r.a.createElement(oe.a,{color:"danger"})):"error"===L?r.a.createElement("p",null,"Error occurs"):null))),r.a.createElement("footer",{className:w.footer},r.a.createElement(S.a,{variant:"h6",align:"center",gutterBottom:!0},"The Yummi Pizza"),r.a.createElement(S.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p"},"Your best decision!"),r.a.createElement(ue,null)))}));a(160);var pe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(O.c,null,r.a.createElement(O.a,{path:"/",component:de}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(161);s.a.defaults.baseURL="http://localhost:5000",l.a.render(r.a.createElement(o.a,{store:C},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.20f0e7ff.chunk.js.map