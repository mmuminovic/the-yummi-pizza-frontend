(this["webpackJsonpthe-yummi-pizza"]=this["webpackJsonpthe-yummi-pizza"]||[]).push([[0],{129:function(e,t,a){e.exports=a(163)},154:function(e,t,a){},155:function(e,t,a){},161:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=a(37),l=a(40),u=a.n(l),s=a(49),m=a(116),d=a(18),p=function(e,t){return Object(d.a)({},e,{},t)},f=function(e){e?u.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete u.a.defaults.headers.common.Authorization},g=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},y={isAuth:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":return p(e,t.data);case"SET_CURRENT_USER":return p(e,{isAuth:!g(t.payload),isAdmin:t.payload.isAdmin||!1,user:t.payload});default:return e}},h={cart:[]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CART":var a=e.cart.map((function(e){return e.id}));return a.indexOf(t.payload.id)<0?e.cart.push(t.payload):(e={cart:e.cart.filter((function(e){return e.id!==t.payload.id}))}).cart.push(t.payload),e;case"CLEAR_CART":return e={cart:[]};case"REMOVE_FROM_CART":return e={cart:e.cart.filter((function(e){return e.id!==t.payload.id}))};default:return e}},C=Object(s.c)({auth:E,cart:b}),x="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,v=Object(s.e)(C,x(Object(s.a)(m.a))),O=(a(154),a(155),a(84)),j=a(12),k=a(68),w=a.n(k),N=a(81),q=a(55),I=a(102),S=a(190),T=a(209),R=a(207),A=a(185),z=a(117),F=a.n(z),P=function(e){return{type:"SET_CURRENT_USER",payload:e}},_={logoutUser:function(e){return function(e){localStorage.removeItem("token"),f(!1),e(P({}))}},login:function(e,t){return function(a){var n={email:e,password:t};u.a.post("/login",n).then((function(e){var t=e.data.token;localStorage.setItem("token",t),f(t);try{var n=F()(t);a(P(n))}catch(r){a(P({}))}}))}},setCurrentUser:P,updateCart:function(e){return{type:"UPDATE_CART",payload:e}},clearCart:function(){return{type:"CLEAR_CART"}},removeFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:e}}},B=a(187),U=a(189),M=a(191),$=a(192),D=a(193),G=Object(A.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),W=function(e){var t=G();return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{position:"fixed"},r.a.createElement(U.a,{className:"justify-content-end",style:{backgroundColor:"#ff8700"}},r.a.createElement("span",{onClick:e.openCart,className:"nav-link",style:{cursor:"pointer"}},r.a.createElement(S.a,{variant:"caption",color:"inherit",noWrap:!0,className:"align-items-center",style:{fontSize:14}},r.a.createElement(M.a,{badgeContent:e.cart.length,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement($.a,{className:t.icon})),r.a.createElement("span",null,"Cart"))),e.isAuth&&r.a.createElement(O.b,{to:"/orders",className:"nav-link",activeStyle:{fontWeight:"bold",color:"#ff8888"}},r.a.createElement(S.a,{variant:"caption",color:"inherit",noWrap:!0,className:"align-items-center",style:{fontSize:14}},r.a.createElement(D.a,{className:t.icon}),r.a.createElement("span",null,"Orders"))))))},Y=a(211),V=a(194),L=a(212),H=a(195),J=a(196),X=a(197),K=Object(A.a)((function(e){return{paper:{position:"absolute",width:"80%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,8,3),justifyContent:"center",alignItems:"stretch",flexDirection:"column",overflow:"auto",maxHeight:"500px"},modalItem:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,padding:"8px 15px"}}})),Q=Object(i.b)((function(e){return Object(d.a)({},e.cart,{},e.auth)}),(function(e){return{updateCart:function(t){return e(_.updateCart(t))},clearCart:function(){return e(_.clearCart())},removeCartItem:function(t){return e(_.removeFromCart(t))}}}))((function(e){var t=e.modal,a=e.setModal,n=e.setOrderProducts,c=K();return r.a.createElement(Y.a,{open:t,onClose:function(){return a(!t)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",flexGrow:1,justifyContent:"center",alignItems:"center"}},r.a.createElement(V.a,{container:!0,className:c.paper},e.cart.length>0?e.cart.map((function(t,a){return r.a.createElement("div",{className:c.modalItem},r.a.createElement("div",null,r.a.createElement("img",{src:t.imageUrl,alt:"",style:{height:"100px",float:"right",marginRight:"24px"}})),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{display:"inline-block",margin:"0",marginRight:"16px"}},t.title),r.a.createElement("span",{onClick:function(){return e.removeCartItem(t)},style:{cursor:"pointer"}},r.a.createElement(H.a,{htmlColor:"#f50057"}))),r.a.createElement("p",null,t.quantity," x $",t.price," = $",(t.quantity*t.price).toFixed(2)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100px"}},r.a.createElement("span",{component:"span",style:{cursor:"pointer",textAlign:"center",marginRight:"12px"},onClick:function(){var a=t.quantity+1;e.updateCart(Object(d.a)({},t,{quantity:a}))}},r.a.createElement(J.a,{color:"primary"})),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:"12px"}},t.quantity),r.a.createElement("span",{style:{cursor:"pointer",textAlign:"center"},onClick:function(){var a=t.quantity-1;a>=1&&e.updateCart(Object(d.a)({},t,{quantity:a}))}},r.a.createElement(X.a,{color:"primary"})))))})):r.a.createElement("div",{className:c.modalItem},"No items in cart"),e.cart.length>0?r.a.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",null,"Shipping: $10"),r.a.createElement("div",{className:c.modalItem,style:{width:"350px"}},e.cart.length>1?"Total: ".concat(e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity})).toFixed(2)," + $10 (shipping) = ").concat((e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity}))+10).toFixed(2)):"Total: ".concat((e.cart[0].price*e.cart[0].quantity).toFixed(2)," + $10 (shipping) = ").concat((e.cart[0].price*e.cart[0].quantity+10).toFixed(2)))):null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"}},e.cart.length>0?r.a.createElement(L.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return n(!0)},style:{marginRight:"16px"}},"Take an order"):null,r.a.createElement(L.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return a(!1)}},"Close"))))})),Z=a(124),ee=a(77),te=a(198),ae=a(199),ne=a(200),re=a(201),ce=a(202),oe=a(203),ie=Object(A.a)((function(e){return{modalItem:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,border:"1px solid black",padding:"8px 15px",borderRadius:"5px"}}})),le=Object(i.b)((function(e){return Object(d.a)({},e.cart,{},e.auth)}),(function(e){return{updateCart:function(t){return e(_.updateCart(t))},clearCart:function(){return e(_.clearCart())},removeCartItem:function(t){return e(_.removeFromCart(t))}}}))((function(e){var t=e.orderProducts,a=e.setOrderProducts,n=e.setOrder,c=e.takeTheOrder,o=e.takingOrder,i=e.loading,l=e.order,u=ie();return r.a.createElement(Y.a,{open:!!t,onClose:function(){a(null),o.reset()},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",style:{display:"flex",flexGrow:1,justifyContent:"center",alignItems:"center"}},"success"===o.status?r.a.createElement("div",{style:{backgroundColor:"white",textAlign:"center",padding:"48px"}},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Taking the order was successful!"),r.a.createElement(S.a,null,"Your order:"),r.a.createElement("p",{style:{margin:"0"}},"Name: ",l&&l.name),r.a.createElement("p",{style:{margin:"0"}},"Address: ",l&&l.address),r.a.createElement("p",{style:{margin:"0"}},"Phone number: ",l&&l.phoneNumber),r.a.createElement("div",{style:{maxHeight:"400px",overflow:"auto",marginBottom:"16px"}},r.a.createElement("p",{style:{marginBottom:"0",marginTop:"16px"}},"Products:"),e.cart.map((function(e,t){return r.a.createElement("div",{className:u.modalItem},r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0"}},e.title),r.a.createElement("p",{style:{margin:"0"}},e.quantity," x $",e.price," = $",(e.quantity*e.price).toFixed(2))))}))),r.a.createElement("div",null,e.cart.length>1?"Total: ".concat(e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity})).toFixed(2)," + $10 (shipping) = ").concat((e.cart.reduce((function(e,t){return e.price*e.quantity+t.price*t.quantity}))+10).toFixed(2)):1===e.cart.length?"Total: ".concat((e.cart[0].price*e.cart[0].quantity).toFixed(2)," + $10 (shipping) = ").concat((e.cart[0].price*e.cart[0].quantity+10).toFixed(2)):null),r.a.createElement(L.a,{color:"secondary",onClick:function(){a(null),e.clearCart(),o.reset()}},"Close")):"loading"!==o.status?r.a.createElement(Z.a,{initialValues:{name:"",address:"",phoneNumber:""},onSubmit:function(){var t=Object(N.a)(w.a.mark((function t(a,r){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(d.a)({},a,{products:e.cart})),c(a);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:ee.a().shape({name:ee.b().required(),address:ee.b().required(),phoneNumber:ee.b().required()})},(function(e){var t=e.values,n=e.touched,c=e.errors,o=e.handleChange,l=e.handleBlur,u=e.handleSubmit,s=c.response;return r.a.createElement(te.a,{onSubmit:u,style:{padding:"24px",backgroundColor:"white"}},r.a.createElement(ae.a,null,r.a.createElement(ne.a,{for:"name"},"Name"),r.a.createElement(re.a,{name:"name",type:"text",value:t.name,onChange:o,onBlur:l}),c.name&&n.name&&r.a.createElement("div",{style:{color:"orangered"}},c.name)),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{for:"address"},"Address"),r.a.createElement(re.a,{name:"address",type:"text",value:t.address,onChange:o,onBlur:l}),c.address&&n.address&&r.a.createElement("div",{style:{color:"orangered"}},c.address)),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{for:"phoneNumber"},"Phone number"),r.a.createElement(re.a,{name:"phoneNumber",type:"text",value:t.phoneNumber,onChange:o,onBlur:l}),c.phoneNumber&&n.phoneNumber&&r.a.createElement("div",{style:{color:"orangered"}},c.phoneNumber)),s&&r.a.createElement("div",{style:{color:"orangered"}},s),r.a.createElement(ce.a,null,r.a.createElement(L.a,{color:"primary",onClick:u,disabled:i},"Order!")," ",r.a.createElement(L.a,{color:"secondary",onClick:function(){return a(!1)},disabled:i},"Cancel")))})):"loading"===o.status?r.a.createElement("div",{style:{backgroundColor:"white",height:"200px",width:"200px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(oe.a,{color:"danger"})):null)})),ue=a(210),se=a(204),me=a(205),de=a(206),pe=Object(A.a)((function(e){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),fe=Object(i.b)((function(e){return Object(d.a)({},e.cart,{},e.auth)}),(function(e){return{updateCart:function(t){return e(_.updateCart(t))},clearCart:function(){return e(_.clearCart())},removeCartItem:function(t){return e(_.removeFromCart(t))}}}))((function(e){var t=e.productInfo,a=e.setProductInfo,n=pe();return r.a.createElement(ue.a,{anchor:"bottom",open:!!t,onClose:function(){return a(null)},onOpen:function(){return a(t)}},r.a.createElement("div",{component:"children",style:{display:"flex",justifyContent:"center",padding:"12px"}},r.a.createElement(V.a,{item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement(se.a,{className:n.card},r.a.createElement(me.a,{className:n.cardMedia,image:t?t.imageUrl:"/",title:"Pizza"}),r.a.createElement(de.a,{className:n.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},t&&t.title),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(S.a,null,t&&t.price),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",{component:"span",style:{cursor:"pointer",textAlign:"center",marginRight:"12px"},onClick:function(){var e=t.quantity+1;a(Object(d.a)({},t,{quantity:e}))}},r.a.createElement(J.a,{color:"primary"})),r.a.createElement("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:"12px"}},t&&t.quantity),r.a.createElement("span",{style:{cursor:"pointer",textAlign:"center"},onClick:function(){var e=t.quantity-1;e>=1&&a(Object(d.a)({},t,{quantity:e}))}},r.a.createElement(X.a,{color:"primary"})))),r.a.createElement(S.a,{style:{textAlign:"center",marginTop:"24px"}},"Total:"," ",t&&(t.quantity*t.price).toFixed(2)))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingBottom:"24px"}},r.a.createElement(L.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){return e.updateCart(t),a(null)},style:{marginRight:"16px"}},"Add to cart"),r.a.createElement(L.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return a(null)}},"Close")))})),ge=a(208),ye=Object(A.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),Ee=function(e){var t=e.productStatus,a=e.products,n=e.setProductInfo,c=ye();return r.a.createElement(R.a,{className:c.cardGrid,maxWidth:"md"},r.a.createElement(V.a,{container:!0,spacing:4},"success"===t?a.map((function(t){return r.a.createElement(V.a,{item:!0,key:t.id,xs:12,sm:6,md:4},r.a.createElement(se.a,{className:c.card},r.a.createElement(me.a,{className:c.cardMedia,image:t.imageUrl,title:"Image title"}),r.a.createElement(de.a,{className:c.cardContent},r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.title),r.a.createElement(S.a,null,t.description),r.a.createElement(S.a,{color:"primary"},"$",t.price)),r.a.createElement(ge.a,null,r.a.createElement(L.a,{size:"small",color:"primary",onClick:function(){return n(Object(d.a)({},t,{quantity:1}))}},"View"),e.isAuth&&r.a.createElement(L.a,{size:"small",color:"primary"},"Edit"))))})):"loading"===t?r.a.createElement("div",{style:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"}},r.a.createElement(oe.a,{color:"danger"})):"error"===t?r.a.createElement("p",null,"Error occurs"):null))};function he(){return r.a.createElement(S.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var be=Object(A.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(14,0,6)},heroButtons:{marginTop:e.spacing(4)},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}})),Ce=Object(i.b)((function(e){return Object(d.a)({},e.cart,{},e.auth)}),(function(e){return{updateCart:function(t){return e(_.updateCart(t))},clearCart:function(){return e(_.clearCart())},removeCartItem:function(t){return e(_.removeFromCart(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(q.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(q.a)(i,2),s=l[0],m=l[1],p=Object(n.useState)(!1),f=Object(q.a)(p,2),g=f[0],y=f[1],E=Object(n.useState)(null),h=Object(q.a)(E,2),b=h[0],C=h[1],x=Object(n.useState)(null),v=Object(q.a)(x,2),O=v[0],j=v[1],k=be(),A=Object(I.b)({queryKey:"products",queryFn:function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){u.a.get("/v1/shop/products").then((function(t){e(t.data)})).catch((function(e){t(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),config:{onSuccess:function(e){m(!1)},onError:function(e){m(!1)}}}),z=A.data,F=A.status,P=e.cart.map((function(e){return{id:e.id,quantity:e.quantity}})),_=Object(I.a)((function(e){return function(e){return new Promise((function(t,a){u.a.post("/v1/shop/orders",e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}(Object(d.a)({},e,{products:P}))}),{onSuccess:function(){o(!1),j(!1),e.clearCart()},onError:function(){m(!1)}}),B=Object(q.a)(_,2),U=B[0],M=B[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null),r.a.createElement(Q,{modal:c,setModal:o,setOrderProducts:y}),r.a.createElement(le,{orderProducts:g,setOrderProducts:y,setOrder:C,takeTheOrder:U,takingOrder:M,loading:s,order:b}),r.a.createElement(fe,{productInfo:O,setProductInfo:j}),r.a.createElement("header",null,r.a.createElement(W,Object.assign({},e,{openCart:function(){return o(!0)}}))),r.a.createElement("main",null,r.a.createElement("div",{className:k.heroContent},r.a.createElement(R.a,{maxWidth:"sm"},r.a.createElement(S.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"The Yummi Pizza"),r.a.createElement(S.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"Your best decision!"))),r.a.createElement(Ee,{products:z,setProductInfo:j,productStatus:F})),r.a.createElement("footer",{className:k.footer},r.a.createElement(S.a,{variant:"h6",align:"center",gutterBottom:!0},"The Yummi Pizza"),r.a.createElement(S.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p"},"Your best decision!"),r.a.createElement(he,null)))}));a(161);var xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/",component:Ce}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(162);u.a.defaults.baseURL="https://the-yummi-pizza-backend.herokuapp.com",o.a.render(r.a.createElement(i.a,{store:v},r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.209d7a39.chunk.js.map